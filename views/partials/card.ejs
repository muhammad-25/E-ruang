<link rel="stylesheet" href="/css/card.css" />
<div class="container-card">
    <h1>Daftar Ruang Kelas</h1>

    <div class="grid">
        <% if (locals.rooms && rooms.length > 0) { %>
            
            <% rooms.forEach(room => { %>
            <a href="/room/<%= room.id %>">
                <article class="card card--vibrant">
                    <div class="media">
                        <span class="badge available">Tersedia</span>
                        <button class="fav" aria-label="Favorit">‚ù§</button>
                        
                        <img 
                            src="<%= room.thumbnail ? '/uploads/rooms/' + room.thumbnail : 'https://placehold.co/600x400?text=No+Image' %>" 
                            alt="<%= room.name %>"
                            loading="lazy"
                        />
                    </div>
                    
                    <div class="content">
                        <div class="title-row">
                            <div>
                                <div class="title"><%= room.name %> (<%= room.code %>)</div>
                                <div class="subtitle"><%= room.gedung || 'Gedung tidak diketahui' %></div>
                            </div>
                        </div>

                        <div class="meta">
                            <div class="chip">Kapasitas: <%= room.capacity %></div>
                            
                            <% if (room.facilities && room.facilities.length > 0) { %>
                                <% room.facilities.slice(0, 3).forEach(fac => { %>
                                    <div class="chip"><%= fac.nama %></div>
                                <% }) %>
                                <% if (room.facilities.length > 3) { %>
                                    <div class="chip">+<%= room.facilities.length - 3 %></div>
                                <% } %>
                            <% } %>
                        </div>

                        <p style="margin:0; font-size:13px; color:#475569">
                            <%= room.deskripsi ? room.deskripsi.substring(0, 80) + '...' : 'Tidak ada deskripsi.' %>
                        </p>

                        <div style="flex:1"></div>

                    </div>
                    
                    <div class="footer">
                        <div>Jam operasional: 08:00 - 17:00</div>
                    </div>
                </article> 
            </a>
            <% }) %>

        <% } else { %>
            <div style="grid-column: 1/-1; text-align: center; padding: 2rem;">
                <h3>Belum ada ruangan yang tersedia saat ini.</h3>
            </div>
        <% } %>
    </div>
</div>